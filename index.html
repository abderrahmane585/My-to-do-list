
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My To-Do List</title>
<link rel="icon" type="image/png" href="favicon.png">
<style>
/* Your existing fancy CSS remains unchanged */
</style>
</head>
<body>

<!-- Floating particles -->
<div class="particles" id="particles"></div>

<div class="container">
    <div class="theme-toggle" onclick="toggleParticles()">âœ¨ Effects</div>
    
    <div class="header">
        <h1>My To-Do List</h1>
        <p class="subtitle">Transform your productivity with style</p>
    </div>

    <div class="input-section">
        <input type="text" id="taskInput" placeholder="What amazing thing will you accomplish today?" maxlength="200">
        <button id="addBtn">Add Task</button>
    </div>

    <div class="stats">
        <div class="stat"><div class="stat-number" id="totalTasks">0</div><div class="stat-label">Total Tasks</div></div>
        <div class="stat"><div class="stat-number" id="completedTasks">0</div><div class="stat-label">Completed</div></div>
        <div class="stat"><div class="stat-number" id="pendingTasks">0</div><div class="stat-label">Remaining</div></div>
    </div>

    <div class="filter-buttons">
        <button class="filter-btn active" data-filter="all">All Tasks</button>
        <button class="filter-btn" data-filter="pending">Active</button>
        <button class="filter-btn" data-filter="completed">Completed</button>
    </div>

    <ul id="todoList"></ul>
</div>

<button onclick="logout()" style="margin-top:15px; background:#e74c3c; color:white; border:none; padding:8px 14px; border-radius:6px; cursor:pointer;">
Logout
</button>

<script>
function logout() {
  localStorage.removeItem('currentUser');
  window.location.href='main.html';
}
</script>


<script>
let currentUser = localStorage.getItem('currentUser');
if(!currentUser) window.location.href='main.html';

let tasks = JSON.parse(localStorage.getItem(currentUser+'_tasks') || '[]');
let currentFilter = 'all';
let particlesEnabled = true;

// ===== Visuals =====
const particlesContainer = document.getElementById('particles');
function createParticles() {
    if(!particlesEnabled) return;
    for(let i=0;i<20;i++){
        const p=document.createElement('div');
        p.className='particle';
        p.style.left=Math.random()*100+'%';
        p.style.top=Math.random()*100+'%';
        p.style.animationDelay=Math.random()*6+'s';
        p.style.animationDuration=(Math.random()*3+4)+'s';
        particlesContainer.appendChild(p);
    }
}
function toggleParticles(){particlesEnabled=!particlesEnabled;particlesContainer.innerHTML='';if(particlesEnabled) createParticles();}

// ===== To-Do Functions =====
const taskInput = document.getElementById('taskInput');
const addBtn = document.getElementById('addBtn');
const todoList = document.getElementById('todoList');
const filterBtns = document.querySelectorAll('.filter-btn');
const totalTasksEl = document.getElementById('totalTasks');
const completedTasksEl = document.getElementById('completedTasks');
const pendingTasksEl = document.getElementById('pendingTasks');

function saveTasks(){localStorage.setItem(currentUser+'_tasks', JSON.stringify(tasks));}
function addTask(){
    const taskText = taskInput.value.trim(); if(taskText==='') return;
    const task={id:Date.now(),text:taskText,completed:false,createdAt:new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})};
    tasks.unshift(task); taskInput.value=''; renderTasks(); updateStats(); saveTasks();
}
function toggleTask(id){tasks=tasks.map(t=>t.id===id?{...t,completed:!t.completed}:t); renderTasks(); updateStats(); saveTasks();}
function deleteTask(id){tasks=tasks.filter(t=>t.id!==id); renderTasks(); updateStats(); saveTasks();}
function filterTasks(filter){currentFilter=filter; filterBtns.forEach(btn=>btn.classList.toggle('active', btn.dataset.filter===filter)); renderTasks();}
function renderTasks(){
    let filtered = tasks; if(currentFilter==='completed') filtered=tasks.filter(t=>t.completed); else if(currentFilter==='pending') filtered=tasks.filter(t=>!t.completed);
    if(filtered.length===0){todoList.innerHTML=`<div class="empty-state"><h3>${currentFilter==='completed'?'No completed tasks yet':currentFilter==='pending'?'No active tasks':'Your canvas awaits'}</h3><p>${currentFilter==='completed'?'Complete some tasks to see them here!':currentFilter==='pending'?'All caught up! Time to add new goals.':'Add your first task and start your productivity journey!'}</p></div>`; return;}
    todoList.innerHTML=filtered.map(t=>`<li class="todo-item ${t.completed?'completed':''}" data-task-id="${t.id}"><div class="task-content"><div class="checkbox ${t.completed?'checked':''}" onclick="toggleTask(${t.id})"></div><span class="task-text">${t.text}</span></div><div class="task-actions"><span class="task-time">${t.createdAt}</span><button class="delete-btn" onclick="deleteTask(${t.id})">Delete</button></div></li>`).join('');
}
function updateStats(){
    const total=tasks.length, completed=tasks.filter(t=>t.completed).length, pending=total-completed;
    animateNumber(totalTasksEl, parseInt(totalTasksEl.textContent), total);
    animateNumber(completedTasksEl, parseInt(completedTasksEl.textContent), completed);
    animateNumber(pendingTasksEl, parseInt(pendingTasksEl.textContent), pending);
}
function animateNumber(el,from,to){const duration=500,start=performance.now();function update(time){const elapsed=time-start,progress=Math.min(elapsed/duration,1);el.textContent=Math.round(from+(to-from)*progress);if(progress<1)requestAnimationFrame(update);}requestAnimationFrame(update);}
function logout(){localStorage.removeItem('currentUser'); window.location.href='main.html';}

// Event Listeners
addBtn.addEventListener('click', addTask);
taskInput.addEventListener('keypress',e=>{if(e.key==='Enter') addTask();});
filterBtns.forEach(btn=>btn.addEventListener('click',()=>filterTasks(btn.dataset.filter)));

// Initialize
window.addEventListener('DOMContentLoaded',()=>{
    createParticles(); renderTasks(); updateStats();
});
</script>
</body>
</html>

